<html>
    <head>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    </head>

    <body>

        <p>Mondia Pass Off... what happens?</p>
    </body>

<script>
    $(document).ready(function() {
        // check if the params are in play. If they are, don't do this
        // or else, 302 JS redundancy = unhappy servers everywhere.

        // status=ERROR&errorCode=4001&errorDesc=MSISDN%20Not%20found%20in%20header
        if(location.search.split('status=')[1] == undefined){
            // didn't find that param. Go get it.
            var merchantId = 147
            var operatorIdd = "MtnRSA"
            var hostUrl = "http://login.mondiamediamena.com"
            var redirectUrl = "http://cowboyengineering.co.za/vFrontMVP/mondiaPassOff.html"
            window.location = hostUrl+"/billinggw-lcm/billing?method=getcustomer&merchantId="+merchantId+"&redirect="+redirectUrl //+"&operatorId=<OPERATOR ID>"
        }
        else
        {
            // SUCCESS: http://www.yoursite.com?status=SUCCESS&customerId=12345&operator=Etisalat%20Egypt
            // ERROR: http://www.yoursite.com?status=ERROR&errorCode=4001&errorDesc=MSISDN%20Not found%20in%20header
            if(location.search.split('status=')[1] == "SUCCESS"){
                console.log("SUCCESS:\n" +
                        "Status: " + location.search.split('status=')[1] + "\n" +
                        "CustomerId: " + location.search.split('customerId=')[1] + "\n" +
                        "Operator: " + location.search.split('operator=')[1])
            }
            else
            {
                // must be an error.
                console.log("ERROR:\n" +
                        "Status: " + location.search.split('status=')[1] + "\n" +
                        "Error Code: " + location.search.split('errorCode=')[1] + "\n" +
                        "Error Desc: " + location.search.split('errorDesc=')[1] + "\n")
            }

        }

    });
</script>

</html>